---
title: Внутренние журналы Microsoft 365 для разработки Microsoft 365
description: В этой статье найдите объяснение работы внутренних журналов для инженерных групп Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom: seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: 110a61c27a00380eede4d4f2303acfb025a27a1f
ms.sourcegitcommit: 024137a15ab23d26cac5ec14c36f3577fd8a0cc4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "51497073"
---
# <a name="internal-logging-for-microsoft-365-engineering"></a><span data-ttu-id="33535-103">Внутренняя регистрация для инженеров Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="33535-103">Internal logging for Microsoft 365 engineering</span></span>

<span data-ttu-id="33535-104">Помимо событий и данных журналов, доступных для клиентов, существует также внутренняя система сбора данных журналов, доступная инженерам Microsoft 365 в Корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="33535-104">In addition to the events and log data available for customers, there is also an internal log data collection system that is available to Microsoft 365 engineers at Microsoft.</span></span> <span data-ttu-id="33535-105">Многие типы данных журнала загружаются с серверов Microsoft 365 во внутреннюю службу вычислений больших данных под названием Cosmos.</span><span class="sxs-lookup"><span data-stu-id="33535-105">Many different types of log data are uploaded from Microsoft 365 servers to an internal, big data computing service called Cosmos.</span></span> <span data-ttu-id="33535-106">Каждая группа служб загружает журналы аудита с соответствующих серверов в базу данных Cosmos для агрегации и анализа.</span><span class="sxs-lookup"><span data-stu-id="33535-106">Each service team uploads audit logs from their respective servers into the Cosmos database for aggregation and analysis.</span></span> <span data-ttu-id="33535-107">Этот перенос данных происходит через подключение TLS с проверкой FIPS 140-2 для специально утвержденных портов и протоколов с помощью средства автоматизации Office Data Loader (ODL).</span><span class="sxs-lookup"><span data-stu-id="33535-107">This data transfer occurs over a FIPS 140-2-validated TLS connection on specifically approved ports and protocols using a proprietary automation tool called the Office Data Loader (ODL).</span></span> <span data-ttu-id="33535-108">Средства, используемые в Microsoft 365 для сбора и обработки записей аудита, не позволяют вносить постоянные или необратимые изменения в исходное содержимое записи аудита или порядок времени.</span><span class="sxs-lookup"><span data-stu-id="33535-108">The tools used in Microsoft 365 to collect and process audit records do not allow permanent or irreversible changes to the original audit record content or time ordering.</span></span>

<span data-ttu-id="33535-109">Группы служб используют Cosmos как централизованный репозиторий для анализа использования приложений, для измерения производительности системы и работы, а также для проверки нарушений и шаблонов, которые могут указывать на проблемы или проблемы с безопасностью.</span><span class="sxs-lookup"><span data-stu-id="33535-109">Service teams use Cosmos as a centralized repository to conduct an analysis of application usage, to measure system and operational performance, and to look for abnormalities and patterns that may indicate problems or security issues.</span></span> <span data-ttu-id="33535-110">Каждая группа служб загружает базовый уровень журналов в Cosmos в зависимости от того, что они хотят проанализировать, которые часто включают:</span><span class="sxs-lookup"><span data-stu-id="33535-110">Each service team uploads a baseline of logs into Cosmos, depending on what they are looking to analyze, that often include:</span></span>

- <span data-ttu-id="33535-111">Журналы событий</span><span class="sxs-lookup"><span data-stu-id="33535-111">Event logs</span></span>
- <span data-ttu-id="33535-112">Журналы AppLocker</span><span class="sxs-lookup"><span data-stu-id="33535-112">AppLocker logs</span></span>
- <span data-ttu-id="33535-113">Данные о производительности</span><span class="sxs-lookup"><span data-stu-id="33535-113">Performance data</span></span>
- <span data-ttu-id="33535-114">Данные Центра систем</span><span class="sxs-lookup"><span data-stu-id="33535-114">System Center data</span></span>
- <span data-ttu-id="33535-115">Записи детализации вызовов</span><span class="sxs-lookup"><span data-stu-id="33535-115">Call detail records</span></span>
- <span data-ttu-id="33535-116">Качество данных об опыте</span><span class="sxs-lookup"><span data-stu-id="33535-116">Quality of experience data</span></span>
- <span data-ttu-id="33535-117">Журналы веб-сервера IIS</span><span class="sxs-lookup"><span data-stu-id="33535-117">IIS Web Server logs</span></span>
- <span data-ttu-id="33535-118">SQL Server журналы</span><span class="sxs-lookup"><span data-stu-id="33535-118">SQL Server logs</span></span>
- <span data-ttu-id="33535-119">Данные Syslog</span><span class="sxs-lookup"><span data-stu-id="33535-119">Syslog data</span></span>
- <span data-ttu-id="33535-120">Журналы аудита безопасности</span><span class="sxs-lookup"><span data-stu-id="33535-120">Security audit logs</span></span>

<span data-ttu-id="33535-121">Перед отправкой данных в Cosmos приложение ODL использует службу очистки, чтобы заместить все поля, содержащие данные клиентов, такие как данные клиента и идентифицируемую конечным пользователем информацию, и заменить эти поля значением hash.</span><span class="sxs-lookup"><span data-stu-id="33535-121">Prior to uploading data into Cosmos, the ODL application uses a scrubbing service to obfuscate any fields that contain customer data, such as tenant information and end-user identifiable information, and replace those fields with a hash value.</span></span> <span data-ttu-id="33535-122">Анонимизированные и хашизированные журналы переписываются и затем загружаются в Cosmos.</span><span class="sxs-lookup"><span data-stu-id="33535-122">The anonymized and hashed logs are rewritten and then uploaded into Cosmos.</span></span> <span data-ttu-id="33535-123">Группы служб запускают объемные запросы по своим данным в Космосе для корреляции, оповещения и отчетов.</span><span class="sxs-lookup"><span data-stu-id="33535-123">Service teams run scoped queries against their data in Cosmos for correlation, alerting, and reporting.</span></span> <span data-ttu-id="33535-124">Период хранения данных журнала аудита в Космосе определяется группами служб; большинство данных журнала аудита сохраняется в течение 90 дней или дольше для поддержки расследований инцидентов безопасности и для удовлетворения требований к хранению нормативных данных.</span><span class="sxs-lookup"><span data-stu-id="33535-124">The period of audit log data retention in Cosmos is determined by the service teams; most audit log data is retained for 90 days or longer to support security incident investigations and to meet regulatory retention requirements.</span></span>

<span data-ttu-id="33535-125">Доступ к данным Microsoft 365, хранимым в Космосе, ограничен уполномоченным персоналом.</span><span class="sxs-lookup"><span data-stu-id="33535-125">Access to Microsoft 365 data stored in Cosmos is restricted to authorized personnel.</span></span> <span data-ttu-id="33535-126">Корпорация Майкрософт ограничивает управление функциями аудита ограниченным подмножеством членов группы служб, отвечающих за функции аудита.</span><span class="sxs-lookup"><span data-stu-id="33535-126">Microsoft restricts the management of audit functionality to the limited subset of service team members that are responsible for audit functionality.</span></span> <span data-ttu-id="33535-127">Эти члены группы не имеют возможности изменять или удалять данные из Cosmos, и все изменения в механизмах ведения журнала для Cosmos записывают и проверяют.</span><span class="sxs-lookup"><span data-stu-id="33535-127">These team members do not have the ability to modify or delete data from Cosmos, and all changes to logging mechanisms for Cosmos are recorded and audited.</span></span>

<span data-ttu-id="33535-128">Каждая команда службы имеет доступ к данным журнала для анализа, разрешая определенным приложениям проводить определенный анализ.</span><span class="sxs-lookup"><span data-stu-id="33535-128">Each service team accesses its log data for analysis by authorizing certain applications to conduct specific analysis.</span></span> <span data-ttu-id="33535-129">Например, группа безопасности Microsoft 365 использует данные из Cosmos с помощью несвободного анализа журнала событий для сопоставления, оповещения и создания отчетов о возможной подозрительной активности в среде производства Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="33535-129">For example, the Microsoft 365 Security team uses data from Cosmos through a proprietary event log parser to correlate, alert, and generate actionable reports on possible suspicious activity in the Microsoft 365 production environment.</span></span> <span data-ttu-id="33535-130">Отчеты из этих данных используются для устранения уязвимостей и повышения общей производительности службы.</span><span class="sxs-lookup"><span data-stu-id="33535-130">The reports from this data are used to correct vulnerabilities, and to improve the overall performance of the service.</span></span> <span data-ttu-id="33535-131">Если определенное оповещение или отчет требуют дополнительного расследования, сотрудники службы могут запросить импорт данных обратно в службу Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="33535-131">If a specific alert or report requires further investigation, service personnel can request that data be imported back into the Microsoft 365 service.</span></span> <span data-ttu-id="33535-132">Так как определенный журнал, импортируемый из Cosmos, находится в зашифрованном виде, а сотрудники службы не имеют доступа к ключам расшифровки, целевой журнал программным образом передается через службу расшифровки, которая возвращает масштабные результаты уполномоченному персоналу службы.</span><span class="sxs-lookup"><span data-stu-id="33535-132">Since the specific log being imported from Cosmos is in encrypted and service personnel do not have access to decryption keys, the target log is programmatically passed through a decryption service that returns scoped results to the authorized service personnel.</span></span> <span data-ttu-id="33535-133">Все уязвимости, найденные в этом упражнении, сообщаются и обостряются с помощью стандартных каналов управления инцидентами безопасности Корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="33535-133">Any vulnerabilities found from this exercise are reported and escalated using Microsoft's standard security incident management channels.</span></span>
