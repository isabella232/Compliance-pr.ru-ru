---
title: Мониторинг данных и самовосстановления в Microsoft 365
description: В этой статье вы узнаете о возможностях мониторинга и самовосстановления Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- MS-Compliance
f1.keywords:
- NOCSH
ms.custom:
- seo-marvel-apr2020
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: baf73746fff5e4866c36975e082c84017e0b3083
ms.sourcegitcommit: 024137a15ab23d26cac5ec14c36f3577fd8a0cc4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "51496939"
---
# <a name="data-monitoring-and-self-healing-in-microsoft-365"></a><span data-ttu-id="55f26-103">Мониторинг данных и самовосстановления в Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="55f26-103">Data monitoring and self-healing in Microsoft 365</span></span>

<span data-ttu-id="55f26-104">Учитывая масштаб Microsoft 365, невозможно сохранить устойчивость и безопасность данных клиентов от вредоносных программ без встроенного мониторинга, который является всеобъемлющим, оповещением о том, что является интеллектуальным и самовосстановления, что является быстрым и надежным.</span><span class="sxs-lookup"><span data-stu-id="55f26-104">Given the scale of Microsoft 365, it would be impossible to keep customer data resilient and safe from malware without built-in monitoring that is comprehensive, alerting that is intelligent, and self-healing that is fast and reliable.</span></span> <span data-ttu-id="55f26-105">Мониторинг набора служб в масштабе Microsoft 365 является очень сложным.</span><span class="sxs-lookup"><span data-stu-id="55f26-105">Monitoring a set of services at the scale of Microsoft 365 is very challenging.</span></span> <span data-ttu-id="55f26-106">Необходимо ввести новые подходы и методологии, а также создать новые наборы технологий для работы и управления службой в подключенной глобальной среде.</span><span class="sxs-lookup"><span data-stu-id="55f26-106">New mindsets and methodologies needed to be introduced, and whole new sets of technology needed to be created to operate and manage the service in a connected global environment.</span></span> <span data-ttu-id="55f26-107">Мы перешли от традиционного подхода мониторинга сбора и фильтрации данных к созданию оповещений к подходу, основанному на анализе данных; принятие сигналов и создание уверенности в этих данных, а затем с помощью автоматизации для восстановления или решения проблемы.</span><span class="sxs-lookup"><span data-stu-id="55f26-107">We have moved away from the traditional monitoring approach of data collection and filtering to create alerts to an approach that is based on data analysis; taking signals and building confidence in that data and then using automation to recover or resolve the issue.</span></span> <span data-ttu-id="55f26-108">Этот подход помогает выкачивать людей из уравнения восстановления, что, в свою очередь, делает операции менее дорогостоящими, быстрыми и менее подверженными ошибкам.</span><span class="sxs-lookup"><span data-stu-id="55f26-108">This approach helps take humans out of the recovery equation, which in turn makes operations less expensive, faster, and less error prone.</span></span> 

<span data-ttu-id="55f26-109">Основным для мониторинга Microsoft 365 является набор технологий, в состав которых входит наш движок data Insights, который построен на технологиях Azure, SQL Azure и потоковой базы данных с открытым исходным [кодом.](https://cassandra.apache.org/)</span><span class="sxs-lookup"><span data-stu-id="55f26-109">Fundamental to Microsoft 365 monitoring is a collection of technologies that comprise our Data Insights Engine, which is built on Azure, SQL Azure, and [open-source streaming database technology](https://cassandra.apache.org/).</span></span> <span data-ttu-id="55f26-110">Она предназначена для сбора и агрегированного сбора данных и вывода.</span><span class="sxs-lookup"><span data-stu-id="55f26-110">It is designed to collect and aggregate data and reach conclusions.</span></span> <span data-ttu-id="55f26-111">В настоящее время он обрабатывает более 500 миллионов событий в час с более чем 100 000 серверов (~15 ТБ в день), разбросанных по десяткам центрах обработки данных во многих регионах, и эти цифры растут.</span><span class="sxs-lookup"><span data-stu-id="55f26-111">Currently, it processes more than 500 million events per hour from more than 100,000 servers (~15 TB per day) scattered across dozens of datacenters in many regions, and these numbers are growing.</span></span> 

<span data-ttu-id="55f26-112">Microsoft 365 использует *сторонний* мониторинг, который включает создание синтетических транзакций для проверки всего важного.</span><span class="sxs-lookup"><span data-stu-id="55f26-112">Microsoft 365 uses *outside-in monitoring*, which involves creating synthetic transactions to test everything that is important.</span></span> <span data-ttu-id="55f26-113">Например, в Exchange Online каждый сценарий тестирует каждую базу данных по всему миру каждые пять минут, обеспечивая практически непрерывное освещение всего, что живет в системе.</span><span class="sxs-lookup"><span data-stu-id="55f26-113">For example, in Exchange Online each scenario is testing every database worldwide every five minutes in a scattered fashion, providing near continuous coverage of everything that lives in the system.</span></span> <span data-ttu-id="55f26-114">Из нескольких местоположений выполняется 250 миллионов тестовых транзакций в день для создания надежной базовой линии или сердцебиения для службы.</span><span class="sxs-lookup"><span data-stu-id="55f26-114">From multiple locations, 250 million test transactions per day are performed to create a robust baseline or heartbeat for the service.</span></span> 

<span data-ttu-id="55f26-115">Microsoft 365 также использует концепцию *Red Alert,* которая сжимает все сигналы мониторинга со всех машин в наших центрах обработки данных до чего-то управляемого человеком.</span><span class="sxs-lookup"><span data-stu-id="55f26-115">Microsoft 365 also uses the concept of *Red Alert*, which shrinks down all the monitoring signals from all of the machines in our datacenters to something manageable by a human being.</span></span> <span data-ttu-id="55f26-116">Концепция довольно проста: если что-то происходит по нескольким сигналам, должно быть что-то происходит.</span><span class="sxs-lookup"><span data-stu-id="55f26-116">The concept is quite simple: If something is happening across multiple signals, there must be something going on.</span></span> <span data-ttu-id="55f26-117">Речь идет не о создании доверия к одному сигналу, а о том, чтобы иметь разумную верность для каждого сигнала, чтобы вы могли получить больше точности.</span><span class="sxs-lookup"><span data-stu-id="55f26-117">It is not about building confidence in one signal, it is about having reasonable fidelity for each signal so that you get greater accuracy.</span></span> <span data-ttu-id="55f26-118">Эта система мониторинга настолько мощна, что у нас нет 24x7 сотрудников, наблюдающих за нашими мониторами; Все, что у нас есть, это механизм, который просыпается, если он обнаруживает проблему, в этом случае он будет страницу соответствующего персонала по вызову, или чаще, как это происходит, он будет просто идти вперед и решить проблему.</span><span class="sxs-lookup"><span data-stu-id="55f26-118">This monitoring system is so powerful that we do not have 24x7 staff watching our monitors; all we have is the machinery that wakes up if it detects a problem, in which case it will page the appropriate on-call personnel, or more often as is the case, it will just go ahead and solve the problem.</span></span> <span data-ttu-id="55f26-119">После начала сбора сигналов и создания красных оповещений мы можем начать триангуляционные работы во всех разделах службы.</span><span class="sxs-lookup"><span data-stu-id="55f26-119">Once we start collecting signals and building red alerts off them, we can start triangulating across all our service partitions.</span></span> 

<span data-ttu-id="55f26-120">На основе сочетания оповещений о сбое и красных оповещений это оповещение указывает точно, какие компоненты могут иметь проблемы, и что система будет пытаться устранить проблему самостоятельно, перезапустив сервер почтовых ящиков.</span><span class="sxs-lookup"><span data-stu-id="55f26-120">Based on the combination of the failure alert and the Red Alerts, this alert indicates exactly which components could be having a problem, and that the system is going to try to correct the problem by itself by restarting a mailbox server.</span></span> 

<span data-ttu-id="55f26-121">Помимо функций самовосстановления, таких как восстановление одной страницы, Exchange Online включает несколько функций, которые подходят к мониторингу и самовосстановления, которое фокусируется на сохранении интерфейса для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="55f26-121">In addition to self-healing capabilities such as single page restore, Exchange Online includes several features that take an approach to monitoring and self-healing which focuses on preserving the end-user experience.</span></span> <span data-ttu-id="55f26-122">К этим функциям относятся *managed Availability,* которая обеспечивает встроенные действия по мониторингу и восстановлению, и AutoReseed, который автоматически восстанавливает избыточность базы данных после сбоя диска.</span><span class="sxs-lookup"><span data-stu-id="55f26-122">These features include *Managed Availability*, which provides built-in monitoring and recovery actions, and AutoReseed, which automatically restores database redundancy after a disk failure.</span></span> 

## <a name="managed-availability"></a><span data-ttu-id="55f26-123">Управляемая доступность</span><span class="sxs-lookup"><span data-stu-id="55f26-123">Managed Availability</span></span> 

<span data-ttu-id="55f26-124">Управляемое доступность предоставляет решение для проверки работоспособности и восстановления, которое отслеживает и защищает опыт конечных пользователей с помощью действий, ориентированных на восстановление.</span><span class="sxs-lookup"><span data-stu-id="55f26-124">Managed availability provides a native health checking and recovery solution that monitors and protects the end user's experience through recovery-oriented actions.</span></span> <span data-ttu-id="55f26-125">Управляемое наличие — это интеграция встроенных действий мониторинга и восстановления с платформой высокой доступности Exchange.</span><span class="sxs-lookup"><span data-stu-id="55f26-125">Managed availability is the integration of built-in monitoring and recovery actions with the Exchange high availability platform.</span></span> <span data-ttu-id="55f26-126">Она создана для обнаружения проблем и восстановления после них сразу после их возникновения и обнаружения системой.</span><span class="sxs-lookup"><span data-stu-id="55f26-126">It's designed to detect and recover from problems as soon as they occur and are discovered by the system.</span></span> <span data-ttu-id="55f26-127">В отличие от предыдущих решений и методов мониторинга для Exchange функция управляемой доступности не пытается определить основную причину проблемы или уведомить о ней пользователей.</span><span class="sxs-lookup"><span data-stu-id="55f26-127">Unlike previous external monitoring solutions and techniques for Exchange, managed availability doesn't try to identify or communicate the root cause of an issue.</span></span> <span data-ttu-id="55f26-128">Вместо этого он ориентирован на аспекты восстановления, которые посвящены трем ключевым областям работы с конечным пользователем:</span><span class="sxs-lookup"><span data-stu-id="55f26-128">Instead, it's focused on recovery aspects that address three key areas of the end-user experience:</span></span>

- <span data-ttu-id="55f26-129">**Доступность .** Могут ли пользователи получить доступ к службе?</span><span class="sxs-lookup"><span data-stu-id="55f26-129">**Availability** - Can users access the service?</span></span> 
- <span data-ttu-id="55f26-130">**Задержка —** каков опыт для пользователей?</span><span class="sxs-lookup"><span data-stu-id="55f26-130">**Latency** - How is the experience for users?</span></span> 
- <span data-ttu-id="55f26-131">**Ошибки** . Могут ли пользователи выполнять то, что они хотят?</span><span class="sxs-lookup"><span data-stu-id="55f26-131">**Errors** - Are users able to accomplish what they want?</span></span> 

<span data-ttu-id="55f26-132">Управляемое доступность — это внутренняя функция, которая работает на каждом сервере Microsoft 365 под управлением Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="55f26-132">Managed availability is an internal feature that runs on every Microsoft 365 server running Exchange Online.</span></span> <span data-ttu-id="55f26-133">Он каждую секунду опрашивает и анализирует сотни метрик работоспособности.</span><span class="sxs-lookup"><span data-stu-id="55f26-133">It polls and analyzes hundreds of health metrics every second.</span></span> <span data-ttu-id="55f26-134">Если установлено, что что-то не так, большую часть времени оно фиксируется автоматически.</span><span class="sxs-lookup"><span data-stu-id="55f26-134">If something is found to be wrong, most of the time it is fixed automatically.</span></span> <span data-ttu-id="55f26-135">Но всегда будут проблемы, которые управляемой доступности не удастся устранить самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="55f26-135">But there will always be issues that managed availability will not be able to fix on its own.</span></span> <span data-ttu-id="55f26-136">В этих случаях управляемое доступность может перенаправить проблему в службу поддержки Microsoft 365 с помощью журнала событий.</span><span class="sxs-lookup"><span data-stu-id="55f26-136">In those cases, managed availability will escalate the issue to a Microsoft 365 support team by means of event logging.</span></span>

## <a name="autoreseed"></a><span data-ttu-id="55f26-137">AutoReseed</span><span class="sxs-lookup"><span data-stu-id="55f26-137">AutoReseed</span></span>

<span data-ttu-id="55f26-138">Серверы Exchange Online развернуты в конфигурации, в которой хранится несколько баз данных и их потоки журналов на одном диске без RAID.</span><span class="sxs-lookup"><span data-stu-id="55f26-138">Exchange Online servers are deployed in a configuration that stores multiple databases and their log streams on the same non-RAID disk.</span></span> <span data-ttu-id="55f26-139">Эту конфигурацию часто называют  просто набором дисков (JBOD), так как для дублирования данных на диске не используются никакие механизмы избыточности хранилища, такие как RAID.</span><span class="sxs-lookup"><span data-stu-id="55f26-139">This configuration is often referred to as *just a bunch of disks* (JBOD) because no storage redundancy mechanisms, such as RAID, are being used to duplicate the data on the disk.</span></span> <span data-ttu-id="55f26-140">При сбое диска в среде JBOD данные на этом диске теряются.</span><span class="sxs-lookup"><span data-stu-id="55f26-140">When a disk fails in a JBOD environment, the data on that disk is lost.</span></span> 

<span data-ttu-id="55f26-141">Учитывая размер Exchange Online и тот факт, что в нем развернуты миллионы дисковых дисков, сбои дисковых дисков являются регулярным явлением в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="55f26-141">Given the size of Exchange Online and the fact that deployed within it are millions of disk drives, disk drive failures are a regular occurrence in Exchange Online.</span></span> <span data-ttu-id="55f26-142">На самом деле более 100 сбой каждый день.</span><span class="sxs-lookup"><span data-stu-id="55f26-142">In fact, more than 100 fail every day.</span></span> <span data-ttu-id="55f26-143">Если диск не работает в локальном развертывании предприятия, администратор должен вручную заменить сбойный диск и восстановить затронутые данные.</span><span class="sxs-lookup"><span data-stu-id="55f26-143">When a disk fails in an on-premises enterprise deployment, an administrator must manually replace the failed disk and restore the affected data.</span></span> <span data-ttu-id="55f26-144">В облачном развертывании размерОм с Microsoft 365, когда операторы (облачные администраторы) вручную заменяют диски, нецелесообразно ни с практической, ни с экономической точки зрения.</span><span class="sxs-lookup"><span data-stu-id="55f26-144">In a cloud deployment the size of Microsoft 365, having operators (cloud administrators) manually replacing disks is neither practical nor economically feasible.</span></span> 

<span data-ttu-id="55f26-145">Автоматическая reseed или *AutoReseed*— это функция, которая заменяет обычно управляемые оператором действия в ответ на сбой диска, событие повреждения базы данных или другую проблему, которая требует повторного копирования копии базы данных.</span><span class="sxs-lookup"><span data-stu-id="55f26-145">Automatic Reseed, or *AutoReseed*, is a feature that is the replacement for what is normally operator-driven action in response to a disk failure, database corruption event, or other issue that necessitates a reseeding of a database copy.</span></span> <span data-ttu-id="55f26-146">Функция Autoreseed была создана для автоматического восстановления избыточности базы данных после сбоя диска с помощью запасных дисков, настроенных в системе.</span><span class="sxs-lookup"><span data-stu-id="55f26-146">AutoReseed is designed to automatically restore database redundancy after a disk failure by using spare disks that have been provisioned on the system.</span></span> <span data-ttu-id="55f26-147">В случае сбой диска копии баз данных, хранимые на этом диске, автоматически перенаправляются на предварительно заранее сконфигурированные запасные диски на сервере, тем самым восстанавливая избыточность.</span><span class="sxs-lookup"><span data-stu-id="55f26-147">If a disk fails, the database copies stored on that disk are automatically reseeded to a preconfigured spare disk on the server, thereby restoring redundancy.</span></span> 