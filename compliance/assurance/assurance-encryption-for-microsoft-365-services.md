---
title: Шифрование для Skype, OneDrive, SharePoint и Exchange
description: Сводка. Описание шифрования для Skype, OneDrive, SharePoint, Microsoft Teams и Exchange Online.
ms.author: krowley
author: kccross
manager: laurawi
ms.reviewer: sosstah
f1.keywords:
- NOCSH
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_Enterprise
- M365-security-compliance
- Strat_O365_Enterprise
- SPO_Content
- MS-Compliance
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: 3907a9a3f085af3d778daa2a385209f4dc9699a4
ms.sourcegitcommit: 024137a15ab23d26cac5ec14c36f3577fd8a0cc4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/01/2021
ms.locfileid: "51497555"
---
# <a name="encryption-for-skype-for-business-onedrive-for-business-sharepoint-online-microsoft-teams-and-exchange-online"></a>Шифрование для бизнеса Skype, OneDrive для бизнеса, SharePoint Online, Microsoft Teams и Exchange Online

Microsoft 365 — это очень безопасная среда, которая обеспечивает широкую защиту в нескольких слоях: физической безопасности центра обработки данных, сетевой безопасности, безопасности доступа, безопасности приложений и безопасности данных.

## <a name="skype-for-business"></a>Skype для бизнеса

Данные клиентов Skype для бизнеса могут храниться в покое в виде файлов или презентаций, которые загружаются участниками собрания. Сервер веб-конференций шифрует данные клиентов с помощью AES с помощью 256-битного ключа. Зашифрованные данные клиента хранятся на файле. Каждый фрагмент данных клиента шифруется с помощью другого случайно сгенерированного 256-битного ключа. Когда часть данных клиентов передается на конференции, сервер веб-конференций предписывает клиентам конференций скачивать зашифрованные данные клиентов с помощью HTTPS. Он отправляет соответствующий ключ клиентам, чтобы можно было расшифровать данные клиента. Сервер веб-конференций также обеспечивает проверку подлинности клиентов конференц-конференций, прежде чем он позволит клиентам получить доступ к данным клиентов конференции. При присоединении к веб-конференции каждый клиент конференц-связи устанавливает диалоговое окно SIP с компонентом фокуса конференц-связи, который сначала работает на переднем сервере по TLS. Фокус конференц-конференции передает клиенту конференции маркер проверки подлинности, созданный сервером веб-конференций. Затем клиент- конференциал подключается к серверу веб-конференций, который представляет файл cookie проверки подлинности для проверки подлинности на сервере.

## <a name="sharepoint-online-and-onedrive-for-business"></a>SharePoint Online и OneDrive для бизнеса

Все файлы клиентов в SharePoint Online защищены уникальными ключами для каждого файла, которые всегда являются исключительными для одного клиента. Ключи создаются и управляются службой SharePoint Online или когда клиентский ключ используется, создается и управляется клиентами. При отправке файла шифрование выполняется SharePoint Online в контексте запроса на отправку перед отправкой в хранилище Azure. При загрузке файла SharePoint Online извлекает зашифрованные данные клиента из хранилища Azure на основе уникального идентификатора документа и расшифрует данные клиентов перед отправкой их пользователю. Хранилище Azure не имеет возможности расшифровки или даже идентификации и понимания данных клиента. Все шифрование и расшифровка происходят в тех же системах, которые используют изоляцию клиента, такие как Azure Active Directory и SharePoint Online.

Несколько рабочих нагрузок в microsoft 365 хранят данные в SharePoint Online, включая Microsoft Teams, которая хранит все файлы в SharePoint Online и OneDrive для бизнеса, которая использует SharePoint Online для хранения. Все данные клиентов, хранимые в SharePoint Online, шифруются (с одним или более ключами AES 256-bit) и распространяются по центру обработки данных следующим образом. (Каждый шаг этого процесса шифрования является проверкой FIPS 140-2 Level 2. Дополнительные сведения о соответствии требованиям FIPS 140-2 см. в см. в [руб.)](/previous-versions/sql/sql-server-2008-r2/bb326611(v=sql.105))

- Каждый файл делится на один или несколько фрагментов в зависимости от размера файла. Каждый фрагмент шифруется с помощью уникального 256-битного ключа AES.
- При обновлении файла обновление обрабатывается таким же образом: изменение делится на один или несколько фрагментов, и каждый фрагмент шифруется отдельным уникальным ключом.
- Эти фрагменты — файлы, фрагменты файлов и дельты обновлений — хранятся в качестве blobs в хранилище Azure, которые случайным образом распределяются между несколькими учетными записями хранилища Azure.
- Набор ключей шифрования для этих фрагментов данных клиента сам по себе зашифрован.

    - Ключи, используемые для шифрования blobs, хранятся в базе данных контента SharePoint Online.
    - База данных контента защищена средствами управления доступом к базе данных и шифрованием в покое. Шифрование выполняется с помощью [прозрачного шифрования](/sql/relational-databases/security/encryption/transparent-data-encryption-tde) данных (TDE) в [базе данных Azure SQL.](/azure/sql-database/sql-database-technical-overview) (База SQL Azure — это служба реляционных баз данных общего назначения в Microsoft Azure, которая поддерживает такие структуры, как реляционные данные, JSON, spatial и XML.) Эти секреты находятся на уровне службы SharePoint Online, а не на уровне клиента. Эти секреты (иногда называемые главными ключами) хранятся в отдельном безопасном репозитории под названием Key Store. TDE обеспечивает безопасность как для активной базы данных, так и для резервных копий баз данных и журналов транзакций.
    - Когда клиенты предоставляют необязательный ключ, ключ клиента хранится в хранилище ключей Azure, а служба использует ключ для шифрования ключа клиента, который используется для шифрования ключа сайта, который затем используется для шифрования ключей уровня файлов. По сути, когда клиент предоставляет ключ, вводится новая иерархия ключей.
- Карта, используемая для повторной сборки файла, хранится в базе данных контента вместе с зашифрованными ключами отдельно от ключа, необходимого для их расшифровки.
- Каждая учетная запись хранилища Azure имеет свои уникальные учетные данные для каждого типа доступа (чтение, запись, переучет и удаление). Каждый набор учетных данных содержится в безопасном хранилище ключей и регулярно обновляется. Как описано выше, существует три различных типа магазинов, каждый из которых имеет отдельную функцию:
    - Данные клиента хранятся в виде зашифрованных blobs в хранилище Azure. Ключ к каждому фрагменту данных клиента шифруется и хранится отдельно в базе данных контента. Сами данные клиента не имеют представления о том, как их можно расшифровать.
    - База данных контента  это база данных SQL Server. В нем содержится карта, необходимая для обнаружения и повторного сбора blobs данных клиента, хранимого в хранилище Azure, а также ключей, необходимых для шифрования этих blobs. Однако набор ключей сам шифруется (как поясняется выше) и хранится в отдельном хранилище ключей.
    - Хранилище ключей физически отделено от базы данных контента и хранилища Azure. Он содержит учетные данные для каждого контейнера хранения Azure и главный ключ к набору зашифрованных ключей, хранимым в базе данных контента.

Каждый из этих трех компонентов хранения — хранилище blob Azure, база данных контента и хранилище ключей — физически отделены друг от друга. Информация, хранящаяся в каждом из компонентов, не может использоваться самостоятельно. Без доступа ко всем трем ключам невозможно получить ключи к фрагментам, расшифровать их, чтобы сделать их годными к использования, связать ключи с соответствующими фрагментами, расшифровать каждый фрагмент или реконструировать документ из его составляющих частей.

Сертификаты BitLocker, защищающие физические объемы дисков на компьютерах центра обработки данных, хранятся в безопасном репозитории (секретном хранилище SharePoint Online), защищенном ключом Farm.

Ключи TDE, защищающие клавиши на blob, хранятся в двух расположениях:

- Безопасное репозиторий, в котором находятся сертификаты BitLocker и защищены ключом фермы; и
- В безопасном репозитории, управляемом azure SQL Database.

Учетные данные, используемые для доступа к контейнерам хранения Azure, также хранятся в секретном хранилище SharePoint Online и делегируют каждой ферме SharePoint Online по мере необходимости. Эти учетные данные являются подписями SAS хранилища Azure, с отдельными учетными данными, используемыми для чтения или записи данных, и с политикой, применяемой таким образом, чтобы они автоматически истекали каждые 60 дней. Различные учетные данные используются для чтения или записи данных (не обоих), а фермам SharePoint Online не дают разрешений на переумерия.

> [!NOTE]
> Для правительственных клиентов Office 365 в США blobs данных хранятся в правительственных хранилищах Azure США. Кроме того, доступ к ключам SharePoint Online в Office 365 правительство США ограничивается сотрудниками Office 365, которые были специально отсевом. Сотрудники правительственных операций Azure в Сша не имеют доступа к магазину ключей SharePoint Online, который используется для шифрования blobs данных.

Дополнительные сведения о шифровании данных в SharePoint Online и OneDrive для бизнеса см. в разделЕ Шифрование данных в OneDrive для бизнеса и [SharePoint Online.](https://technet.microsoft.com/library/dn905447.aspx)

### <a name="list-items-in-sharepoint-online"></a>Список элементов в SharePoint Online

Элементы списка — это меньшие фрагменты данных клиентов, созданных специально или которые могут более динамично жить на сайте, например строки в созданном пользователем списке, отдельные сообщения в блоге SharePoint Online или записи на странице вики SharePoint Online. Элементы списка хранятся в базе данных контента (Azure SQL Database) и защищаются с помощью TDE.

## <a name="encryption-of-data-in-transit"></a>Шифрование транзитных данных

В OneDrive для бизнеса и SharePoint Online используются два сценария для входящих и исходящих данных в центрах данных.

- **Клиентская связь с сервером** — связь с SharePoint Online и OneDrive для бизнеса через Интернет использует TLS-подключения.
- **Перемещение данных между центрами** обработки данных . Основной причиной перемещения данных между центрами обработки данных является гео репликация для обеспечения аварийного восстановления. Например, SQL Server журналы транзакций и дельты хранения blob путешествуют по этой трубе. Хотя эти данные передаются по частной сети, они дополнительно защищены лучшим в своем классе шифрованием.

## <a name="exchange-online"></a>Exchange Online

Exchange Online использует BitLocker для всех данных почтовых ящиков, а конфигурация BitLocker описана в [BitLocker для шифрования.](/microsoft-365/compliance/office-365-bitlocker-and-distributed-key-manager-for-encryption) Шифрование на уровне службы шифрует все данные почтовых ящиков на уровне почтовых ящиков. 

Помимо шифрования служб Microsoft 365 поддерживает клиентский ключ, который построен на основе шифрования служб. Ключ клиента — это управляемый Microsoft параметр шифрования службы Exchange Online, который также находится в дорожной карте Майкрософт. Этот метод шифрования обеспечивает повышенную защиту, не предоставленную BitLocker, так как он обеспечивает разделение администраторов серверов и криптографических ключей, необходимых для расшифровки данных, а также потому, что шифрование применяется непосредственно к данным (в отличие от BitLocker, который применяет шифрование в том логическом диске) любые клиентские данные, скопированные с сервера Exchange, остаются зашифрованными.

Область шифрования службы Exchange Online — это данные клиентов, хранимые в режиме покоя в Exchange Online. (Skype для бизнеса хранит почти весь созданный пользователем контент в почтовом ящике Exchange Online пользователя и, следовательно, наследует функцию шифрования службы Exchange Online.)


## <a name="microsoft-teams"></a>Microsoft Teams

Teams использует TLS и MTLS для шифрования мгновенных сообщений. Весь трафик от сервера к серверу требует MTLS, независимо от того, ограничивается ли трафик внутренней сетью или пересекает внутренний периметр сети.

В этой таблице подводятся итоги протоколов, используемых Teams.

|**Тип трафика**|**Зашифровано**|
|:-----|:-----|
|Сервер к серверу|MTLS|
|Клиент-сервер (ex. мгновенные сообщения и присутствие)|TLS;|
|Потоки мультимедиа (например. аудио- и видеосвязь мультимедиа)|TLS;|
|Аудио- и видеосвязь мультимедиа|SRTP/TLS|
|Передача сигналов|TLS;|

#### <a name="media-encryption"></a>Шифрование мультимедиа

Трафик мультимедиа шифруется с помощью secure RTP (SRTP), профиля протокола транспорта Real-Time (RTP), который обеспечивает конфиденциальность, проверку подлинности и защиту от атак повторно для трафика RTP. SRTP использует ключ сеанса, созданный с помощью безопасного генератора случайных чисел и обменивается с помощью сигнального канала TLS. Трафик мультимедиа от клиента к клиенту ведется через сигнализацию подключения клиента к серверу, но шифруется с помощью SRTP при непосредственном движении от клиента к клиенту.

Teams использует маркер на основе учетных данных для безопасного доступа к ретранслятору мультимедиа через TURN. Ретрансляторы мультимедиа обмениваются маркером через канал, защищенный TLS.

#### <a name="fips"></a>FIPS

Teams использует алгоритмы FIPS (Federal Information Processing Standard) для обмена ключами шифрования. Дополнительные сведения о реализации FIPS см. в публикации [140-2](/microsoft-365/compliance/offering-fips-140-2)Федерального стандарта обработки информации (FIPS).
