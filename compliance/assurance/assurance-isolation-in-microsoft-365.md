---
title: Изоляция и управление доступом в Microsoft 365
description: Сводка. Объяснение изоляции и управления доступом в различных приложениях Microsoft 365.
ms.author: robmazz
author: robmazz
manager: laurawi
ms.reviewer: sosstah
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
ms.localizationpriority: medium
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
- SPO_Content
- MS-Compliance
f1.keywords:
- NOCSH
titleSuffix: Microsoft Service Assurance
hideEdit: true
ms.openlocfilehash: 9b152aedd872c43d58b248f846d5550117566442
ms.sourcegitcommit: 4c00fd65d418065d7f53216c91f455ccb3891c77
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/23/2021
ms.locfileid: "58481931"
---
# <a name="isolation-and-access-control-in-microsoft-365"></a>Управление изоляцией и доступом в Microsoft 365

Azure Active Directory (Azure AD) и Microsoft 365 используют очень сложную модель данных, которая включает десятки служб, сотни сущностями, тысячи связей и десятки тысяч атрибутов. На высоком уровне Azure AD и каталоги служб являются контейнерами клиентов и получателей, которые синхронизируются с помощью протоколов репликации на основе состояния. Помимо сведений об каталогах, которые имеются в Azure AD, каждая из рабочих нагрузок служб имеет собственную инфраструктуру служб каталогов.
 
![Microsoft 365 клиента синхронизация данных](../media/office-365-isolation-tenant-data-sync.png)

В этой модели нет единого источника данных каталогов. Конкретные системы владеют отдельными частями данных, но ни одна система не содержит все данные. Microsoft 365 службы сотрудничают с Azure AD в этой модели данных. Azure AD — это "система правды" для общих данных, которая обычно является небольшими и статическими данными, используемыми каждой службой. Федерарная модель, используемая в Microsoft 365 Azure AD, предоставляет общее представление данных.

Microsoft 365 использует физическое хранилище и облачное хранилище Azure. Exchange Online (в том числе Exchange Online Protection) и Skype для бизнеса использовать собственное хранилище для данных клиентов. SharePoint Он-лайн использует SQL Server и служба хранилища Azure, следовательно, требуется дополнительная изоляция данных клиентов на уровне хранилища.

## <a name="exchange-online"></a>Exchange Online

Exchange Online хранит данные клиентов в почтовых ящиках. Почтовые ящики находятся в базах данных extensible служба хранилища Engine (ESE), называемых базами данных почтовых ящиков. К ним относятся почтовые ящики пользователей, связанные почтовые ящики, общие почтовые ящики и почтовые ящики общедоступных папок. Почтовые ящики пользователей включают сохраненный Skype для бизнеса контент, например истории бесед.

Содержимое почтового ящика пользователя включает в себя:

- Сообщения электронной почты и вложения электронной почты
- Календарь и сведения о свободном/загруженном графике
- Контакты
- Задачи
- Примечания
- Группы
- Данные о выводе

Каждая база данных почтовых ящиков Exchange Online содержит почтовые ящики нескольких клиентов. Код авторизации обеспечивает безопасность каждого почтового ящика, в том числе в аренде. По умолчанию доступ к почтовому ящику имеет только назначенное пользователе. Список управления доступом (ACL), который обеспечивает безопасность почтового ящика, содержит удостоверение, проверку подлинности в Azure AD на уровне клиента. Почтовые ящики для каждого клиента ограничены удостоверениями, проверкой подлинности которых является поставщик проверки подлинности клиента, который включает только пользователей из этого клиента. Содержимое в клиенте A никак не может быть получено пользователями в клиенте B, если не будет явно утверждено клиентом A.

## <a name="skype-for-business"></a>Skype для бизнеса

Skype для бизнеса хранит данные в различных местах:

- Сведения о пользователях и учетных записях, включающие конечные точки подключения, номера клиента, планы набора номеров, параметры роуминга, состояние присутствия, списки контактов и т. д., хранятся на серверах Skype для бизнеса Active Directory и в различных серверах Skype для бизнеса баз данных. Списки контактов хранятся в почтовом ящике Exchange Online, если пользователь включен для обеих продуктов, или на Skype для бизнеса серверах, если пользователь не включен. Skype для бизнеса серверы баз данных не являются раздельными для каждого клиента, но многотенантная изоляция данных обеспечивается с помощью управления доступом на основе ролей (RBAC).
- Содержимое собраний и загруженные данные хранятся в акциях распределенной файловой системы (DFS). Этот контент также можно архивировать в Exchange Online, если включено. Акции DFS не разделяются на одного клиента. содержимое защищено с помощью acLs, а многоуровневая аренда обеспечивается через RBAC.
- Записи подробных вызовов, которые являются историей действий, такими как история вызовов, сеансы обмена мгновенными вызовами, обмен приложениями, история обмена мгновенными вызовами и т. д., также могут храниться в Exchange Online, но большинство записей детализации вызовов временно хранятся на серверах записи фиксаторов вызовов (CDR). Содержимое не разделяется на одного клиента, но многоуровневая аренда обеспечивается через RBAC.

## <a name="sharepoint-online"></a>SharePoint Online

SharePoint В Интернете есть несколько независимых механизмов, которые обеспечивают изоляцию данных. Он хранит объекты в качестве абстрактного кода в базах данных приложений. Например, когда пользователь загружает файл в SharePoint Online, он разобрано, переведено в код приложения и хранится в нескольких таблицах в нескольких базах данных.

Если пользователь может получить прямой доступ к хранилище, содержащее данные, содержимое не интерпретируется для человека или любой системы, кроме SharePoint Online. Эти механизмы включают управление доступом к безопасности и свойства. Все SharePoint интернет-ресурсы защищены кодом авторизации и политикой RBAC, в том числе в рамках аренды. Список управления доступом (ACL), который обеспечивает ресурс, содержит удостоверение, проверку подлинности на уровне клиента. SharePoint Данные в Интернете для клиента ограничиваются удостоверениями, проверкой подлинности для клиента.

В дополнение к ALS свойство уровня клиента, которое указывает поставщика проверки подлинности (который является клиентом Azure AD), пишется один раз и не может быть изменено после набора. После того как свойство клиента поставщика проверки подлинности установлено для клиента, его нельзя изменить с помощью API, выставленных для клиента.

Для каждого клиента используется уникальный *SubscriptionId.* Все сайты клиентов принадлежат клиенту и назначена *подписка,* уникальная для клиента. Свойство *SubscriptionId* на сайте пишется один раз и является постоянным. После присвоения клиенту сайт не может быть перемещен в другой клиент. *SubscriptionId* — это ключ, используемый для создания области безопасности для поставщика проверки подлинности и привязанный к клиенту.

SharePoint В Интернете SQL Server и служба хранилища Azure для хранения метаданных контента. Ключ раздела для магазина контента *— SiteId* в SQL. При запуске SQL запроса SharePoint Online использует *проверку SiteId* в рамках проверки *SubscriptionId* на уровне клиента.

SharePoint Интернет-магазины зашифрованного контента файлов в Microsoft Azure blobs. Каждая ферма SharePoint Online имеет свою учетную запись Microsoft Azure и все blobs, сохраненные в Azure, шифруются по отдельности с ключом, хранимым в SQL хранилище контента. Ключ шифрования, защищенный в коде слоем авторизации и не подвергался непосредственному контакту с конечным пользователем. SharePoint Он-лайн имеет мониторинг в режиме реального времени, чтобы определить, когда http-запрос считывает или записывает данные для более чем одного клиента. Идентификатор *запроса SubscriptionId* отслеживается в *subscriptionId* доступного ресурса. Запросы на доступ к ресурсам более чем одного клиента никогда не должны происходить конечными пользователями. Единственным исключением являются запросы на обслуживание в среде с несколькими клиентами. Например, обходной запрос извлекает изменения контента для всей базы данных одновременно. Это обычно включает запрос сайтов более чем одного клиента в одном запросе службы, который делается по соображениям эффективности.

## <a name="teams"></a>Teams

Ваши Teams хранятся по-разному, в зависимости от типа контента. 

Ознакомьтесь с [сеансом ignite breakout Microsoft Teams архитектуры](https://channel9.msdn.com/Events/Ignite/Microsoft-Ignite-Orlando-2017/BRK3071) для углубленного обсуждения.

### <a name="core-teams-customer-data"></a>Основные Teams данные клиентов

Если клиент содержится в Австралии, Канаде, Европейском союзе, Франции, Германии, Индии, Японии, Южной Африке, Южной Корее, Швейцарии (включая Лихтенштейн), Объединенных Арабских Эмиратах, Соединенном Королевстве или СОЕДИНЕННЫх Штатах, Microsoft хранит следующие данные клиентов в покое только в этом расположении:

- Teams, беседы с командой и каналами, изображения, сообщения голосовой почты и контакты.
- контент сайта SharePoint Online и файлы, которые хранятся на этом сайте;
- Файлы, загруженные в OneDrive для работы или учебного заведения.

#### <a name="chat-channel-messages-team-structure"></a>Чат, сообщения каналов, структура группы

Каждая команда в Teams имеет Microsoft 365 группу и ее SharePoint и Exchange почтовый ящик. Частные чаты (включая групповые чаты), сообщения, отправленные в рамках беседы на канале, а также структура групп и каналов хранятся в службе чата, запущенной в Azure. Данные также хранятся в скрытой папке в почтовых ящиках пользователей и групп, чтобы включить функции защиты информации.

#### <a name="voicemail-and-contacts"></a>Голосовая почта и контакты

Голосовая почта хранится в Exchange. Контакты хранятся в Exchange хранилище облачных данных. Exchange и Exchange облачном хранилище уже предоставляют резидентство данных в каждом из геоцентров центра обработки данных во всем мире. Для всех групп голосовая почта и контакты хранятся в австралии, Канаде, Франции, Германии, Индии, Японии, Объединенных Арабских Эмиратах, Великобритании, Южной Африке, Южной Корее, Швейцарии (включая Лихтенштейн) и США. Для всех других стран файлы хранятся в США, Европе или Asia-Pacific на основе сродства клиента.

#### <a name="images-and-media"></a>Изображения и носители

Носители, используемые в чатах (за исключением GIF-адресов Giphy, которые не хранятся, но являются ссылкой на исходный URL-адрес службы Giphy, Giphy — это служба не Microsoft) хранятся в медиа-службе на основе Azure, развернутой в тех же местах, что и служба чата.

#### <a name="files"></a>Файлы

Файлы (в том числе OneNote и Вики), которые кто-то делит в канале, хранятся на веб-сайте SharePoint группы. Файлы, общие в частном чате или чате во время собрания или звонка, загружаются и хранятся в OneDrive для работы или учетной записи учебного заведения пользователя, который разделяет файл. Exchange, SharePoint и OneDrive уже предоставляют резидентство данных в каждом из геоцентров центра обработки данных во всем мире. Таким образом, для существующих клиентов все файлы, OneNote записные книжки, Teams контент вики и почтовые ящики, которые являются частью Teams, уже хранятся в расположении на основе сродства клиента. Файлы хранятся в Австралии, Канаде, Франции, Германии, Индии, Японии, Объединенных Арабских Эмиратах, Великобритании, Южной Африке, Южной Корее и Швейцарии (включая Лихтенштейн). Для всех других стран файлы хранятся в США, Европе или Азиатско-Тихоокеанском регионе на основе сродства клиента.
